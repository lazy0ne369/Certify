import{c as w,r as C,j as e,X as S,A as z}from"./index-CW9Uh7i3.js";import{u as A,a as E,b as F,o as I,s as n}from"./schemas-CqVGTqjY.js";import{f as p,S as O}from"./dateUtils-CaFEdTP-.js";import{B as h}from"./Button-ILoPTvOg.js";import{B}from"./building-2-c_DYbuGm.js";import{C as _}from"./calendar-DqUV_Jh0.js";const q=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],R=w("upload",q),T=["Cloud","DevOps","Data","Frontend"],L={Cloud:"bg-sky-100 text-sky-700 dark:bg-sky-900/40 dark:text-sky-300",DevOps:"bg-violet-100 text-violet-700 dark:bg-violet-900/40 dark:text-violet-300",Data:"bg-teal-100 text-teal-700 dark:bg-teal-900/40 dark:text-teal-300",Frontend:"bg-pink-100 text-pink-700 dark:bg-pink-900/40 dark:text-pink-300"},W=I({title:n().min(3,"Title must be at least 3 characters"),organization:n().min(1,"Organization is required"),issueDate:n().min(1,"Issue date is required"),expiryDate:n().min(1,"Expiry date is required"),category:n().min(1,"Category is required"),credentialId:n().optional(),description:n().max(300,"Max 300 characters").optional()}).refine(s=>!s.issueDate||!s.expiryDate||s.expiryDate>s.issueDate,{message:"Expiry date must be after issue date",path:["expiryDate"]}),t=({children:s})=>e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:s}),o=({msg:s})=>s?e.jsx("p",{className:"text-xs text-red-500 mt-0.5",children:s}):null,l="w-full h-9 px-3 text-sm rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors";function G({defaultValues:s={},onSubmit:u,onCancel:y,loading:j,submitLabel:f}){const m=C.useRef(null),{register:r,handleSubmit:b,control:k,watch:v,setValue:c,formState:{errors:d}}=A({resolver:E(W),defaultValues:s}),a=F({control:k}),g=v("_fileName"),N=a.expiryDate?new Date(a.expiryDate)<new Date?"expired":new Date(a.expiryDate)<new Date(Date.now()+90*864e5)?"expiring_soon":"active":"active",D=i=>{const x=i.target.files?.[0];x&&(c("certificateFile",x),c("_fileName",x.name))};return e.jsxs("form",{onSubmit:b(u),className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[e.jsxs("div",{className:"lg:col-span-3 space-y-4 rounded-xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 shadow-md p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(t,{children:"Certificate Title *"}),e.jsx("input",{...r("title"),placeholder:"AWS Solutions Architect",className:l}),e.jsx(o,{msg:d.title?.message})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Organization *"}),e.jsx("input",{...r("organization"),placeholder:"Amazon Web Services",className:l}),e.jsx(o,{msg:d.organization?.message})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Category *"}),e.jsxs("select",{...r("category"),className:l,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select category"}),T.map(i=>e.jsx("option",{value:i,children:i},i))]}),e.jsx(o,{msg:d.category?.message})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Issue Date *"}),e.jsx("input",{...r("issueDate"),type:"date",className:l}),e.jsx(o,{msg:d.issueDate?.message})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Expiry Date *"}),e.jsx("input",{...r("expiryDate"),type:"date",className:l}),e.jsx(o,{msg:d.expiryDate?.message})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Credential ID"}),e.jsx("input",{...r("credentialId"),placeholder:"ABC-123-XYZ",className:l})]}),e.jsxs("div",{children:[e.jsx(t,{children:"Certificate File (PDF/Image)"}),e.jsxs("div",{onClick:()=>m.current?.click(),className:"flex items-center gap-2 h-9 px-3 text-sm rounded-xl border border-dashed border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx(R,{className:"w-3.5 h-3.5 text-gray-400"}),e.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs truncate",children:g??"Click to upload"}),g&&e.jsx("button",{type:"button",onClick:i=>{i.stopPropagation(),c("_fileName","")},className:"ml-auto",children:e.jsx(S,{className:"w-3.5 h-3.5 text-gray-400"})})]}),e.jsx("input",{ref:m,type:"file",accept:".pdf,image/*",className:"hidden",onChange:D})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(t,{children:"Description (max 300 chars)"}),e.jsx("textarea",{...r("description"),rows:3,placeholder:"Brief description of this certification…",className:`${l} h-auto py-2 resize-none`}),e.jsx(o,{msg:d.description?.message})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(h,{type:"submit",variant:"primary",size:"md",loading:j,fullWidth:!0,children:f}),e.jsx(h,{type:"button",variant:"outline",size:"md",onClick:y,children:"Cancel"})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"sticky top-20 rounded-xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 shadow-md overflow-hidden",children:[e.jsx("div",{className:"h-24 bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center",children:e.jsx(z,{className:"w-12 h-12 text-indigo-300 dark:text-indigo-600"})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-snug",children:a.title||e.jsx("span",{className:"text-gray-400 italic",children:"Certificate Title"})}),e.jsxs("p",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[e.jsx(B,{className:"w-3 h-3"}),a.organization||e.jsx("span",{className:"italic",children:"Organization"})]})]}),a.category&&e.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full shrink-0 ${L[a.category]??""}`,children:a.category})]}),(a.issueDate||a.expiryDate)&&e.jsxs("p",{className:"flex items-center gap-1.5 text-xs text-gray-400 dark:text-gray-500",children:[e.jsx(_,{className:"w-3 h-3"}),a.issueDate?p(a.issueDate):"—"," → ",a.expiryDate?p(a.expiryDate):"—"]}),e.jsx(O,{status:N}),e.jsx("p",{className:"text-[10px] font-medium text-indigo-400 dark:text-indigo-500 text-center pt-1",children:"Live Preview"})]})]})})]})}export{G as C,R as U};
