import{e as w,u as A,r as l,j as e,n as E,o as S,m as s,s as b,l as v,C as D,t as h,A as T,d as I}from"./index-DqnZHJlm.js";import{p as M}from"./proxyUsers-DS1B74NO.js";import{a as P,P as j}from"./PageWrapper-jBPFsgSk.js";import{C as U}from"./CertCard-CMMwuynt.js";import{E as $}from"./EmptyState-DTEZnqut.js";import{C as B}from"./ConfirmModal-8CIY11ze.js";import{A as V}from"./AdminEditModal-DJdKPpN4.js";import{A as L}from"./arrow-left-7FfpHp1b.js";import{C as O}from"./circle-check-big-DH7oPoJV.js";import{T as R}from"./triangle-alert-CzCR-d6-.js";import{C as W}from"./circle-x-BIXfONSW.js";import"./dateUtils-BVFGuS_P.js";import"./format-DjRW02ZO.js";import"./CountdownTimer-CBIfu1Hv.js";import"./certHelpers-DkieFg5O.js";import"./building-2-Bw3y2aCa.js";import"./calendar-CsK2H7Mk.js";import"./Button-CbSh4IzU.js";import"./loader-circle-CtU4X_I-.js";import"./CertForm-Bv0CbUWD.js";import"./schemas-Dt07UdQj.js";function c({icon:i,label:m,value:r,color:a}){const o={indigo:"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400",emerald:"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400",amber:"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",red:"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400"};return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-xl text-xs font-semibold ${o[a]}`,children:[e.jsx(i,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[r," ",m]})]})}function le(){const{userId:i}=w(),m=A(),r=M.find(t=>t.id===i)??null,[a,o]=l.useState(P.filter(t=>t.issuedTo===i||t.userId===i)),[x,g]=l.useState(null),[n,p]=l.useState(null),d=l.useMemo(()=>({total:a.length,active:a.filter(t=>t.status==="active").length,expiringSoon:a.filter(t=>t.status==="expiring_soon").length,expired:a.filter(t=>t.status==="expired").length}),[a]),C=t=>{o(u=>u.map(f=>f.id===x.id?{...f,...t}:f)),h.success("Certificate updated!"),g(null)},k=()=>{o(t=>t.filter(u=>u.id!==n.id)),h.success(`"${n.title}" deleted.`),p(null)};if(!r)return e.jsx(j,{children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-24",children:"User not found."})});const N=E(r.name),y=S(r.name);return e.jsxs(j,{children:[e.jsxs(s.div,{variants:b,initial:"hidden",animate:"visible",className:"space-y-6",children:[e.jsxs(s.button,{variants:v,onClick:()=>m("/admin/users"),className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:[e.jsx(L,{className:"w-4 h-4"})," Back to User Management"]}),e.jsxs(s.div,{variants:v,className:"rounded-xl bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 shadow-md p-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.avatar?e.jsx("img",{src:r.avatar,alt:r.name,className:"w-14 h-14 rounded-full object-cover ring-2 ring-indigo-100 dark:ring-indigo-900"}):e.jsx("span",{className:`w-14 h-14 rounded-full flex items-center justify-center text-white font-bold text-lg ${y}`,children:N}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.designation," · ",r.department]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:r.email})]}),e.jsxs("button",{onClick:()=>h.info("Add Cert modal coming — wire to AddCertification!"),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-xl transition-colors",children:[e.jsx(D,{className:"w-4 h-4"})," Add Cert"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsx(c,{icon:T,label:"Total",value:d.total,color:"indigo"}),e.jsx(c,{icon:O,label:"Active",value:d.active,color:"emerald"}),e.jsx(c,{icon:R,label:"Expiring Soon",value:d.expiringSoon,color:"amber"}),e.jsx(c,{icon:W,label:"Expired",value:d.expired,color:"red"})]})]}),a.length===0?e.jsx($,{title:"No certifications",message:"This user has no certifications yet."}):e.jsx(s.div,{variants:b,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(t=>e.jsxs(s.div,{variants:I,className:"flex flex-col",children:[e.jsx(U,{cert:t}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("button",{onClick:()=>g(t),className:"flex-1 py-1.5 text-xs font-medium text-indigo-600 dark:text-indigo-400 border border-indigo-200 dark:border-indigo-800 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>p(t),className:"flex-1 py-1.5 text-xs font-medium text-red-600 dark:text-red-400 border border-red-200 dark:border-red-900 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Delete"})]})]},t.id))})]}),x&&e.jsx(V,{cert:x,onClose:()=>g(null),onSave:C}),e.jsx(B,{isOpen:!!n,onClose:()=>p(null),onConfirm:k,title:"Delete Certification",description:`Delete "${n?.title}"? This cannot be undone.`})]})}export{le as default};
