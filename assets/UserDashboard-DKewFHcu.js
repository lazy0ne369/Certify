import{c as u,j as e,m as i,s as n,C as f,l,r as v,b as j,u as k,a as N,A as w}from"./index-C0ieeu2S.js";import{g as C,a as S,b as A}from"./certHelpers-Cc7dZ_k1.js";import{u as D,S as T}from"./SkeletonCard-DkyCEAbT.js";import{t as x,p as g,P as p}from"./PageWrapper-JZwSvfrW.js";import{S as R,C as E}from"./CertDonutChart-BZ_THVhx.js";import{A as I,C as _}from"./CertCard-BGYt3vl4.js";import{S as P,C as B}from"./share-2-CRbVjVK2.js";import{D as L}from"./download-B-JLCYls.js";import{P as O}from"./pencil-DosdNEe2.js";import{C as U}from"./circle-alert-B0k9HSoX.js";import{E as $}from"./EmptyState-D_QzYgkk.js";import{f as M}from"./dateUtils-BGlkgNRu.js";import{B as V}from"./building-2-D8q02WTv.js";import{C as W}from"./circle-check-big-CbJLV5pj.js";import{T as F}from"./triangle-alert-BYSrm-jQ.js";import{C as K}from"./circle-x-CqeZHhiu.js";import"./clsx-B-dksMZM.js";import"./CountdownTimer-DsLY5sAx.js";import"./calendar-D6za10IW.js";import"./format-DpBRIVSv.js";const z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]],G=u("clock",z);function H(s,r){const a=+x(s)-+x(r);return a<0?-1:a>0?1:a}const X={add:"bg-emerald-500",expired:"bg-red-500",updated:"bg-indigo-500",download:"bg-sky-500",share:"bg-violet-500"},Y={add:f,expired:U,updated:O,download:L,share:P},q=[{id:1,type:"add",text:"Added AWS Certification",time:"2 days ago"},{id:2,type:"expired",text:"Certificate Expired: Google Cloud",time:"5 days ago"},{id:3,type:"updated",text:"Updated React Developer Cert",time:"1 week ago"},{id:4,type:"download",text:"Downloaded IBM Data Science Certificate",time:"2 weeks ago"},{id:5,type:"share",text:"Shared Kubernetes Certificate",time:"3 weeks ago"}];function J({userId:s}){return e.jsxs("div",{className:"rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-5 py-4 border-b border-gray-100 dark:border-gray-800",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:"Recent Activity"})}),e.jsx(i.ul,{variants:n,initial:"hidden",animate:"visible",className:"divide-y divide-gray-50 dark:divide-gray-800",children:q.map(r=>{const a=Y[r.type],d=X[r.type];return e.jsxs(i.li,{variants:l,className:"flex items-start gap-3 px-5 py-3.5 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("span",{className:`mt-1.5 w-2 h-2 rounded-full shrink-0 ${d}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-3.5 h-3.5 text-gray-400 dark:text-gray-500 shrink-0"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:r.text})]}),e.jsx("p",{className:"mt-0.5 text-xs text-gray-400 dark:text-gray-500",children:r.time})]})]},r.id)})})]})}const m={active:{border:"border-emerald-400 dark:border-emerald-600",chip:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300",dot:"bg-emerald-500"},expiring_soon:{border:"border-amber-400 dark:border-amber-600",chip:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300",dot:"bg-amber-500"}};function Q({days:s,styleKey:r}){const{chip:a}=m[r]??m.active;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-semibold ${a}`,children:[e.jsx(G,{className:"w-3 h-3"}),s===0?"Today!":`${s}d left`]})}function Z({cert:s}){const r=C(s.expiryDate)??0,a=s.status==="expiring_soon"?"expiring_soon":"active",{border:d,dot:t}=m[a];return e.jsxs(i.div,{variants:l,className:`shrink-0 w-52 rounded-xl border-2 ${d} bg-white dark:bg-gray-900 shadow-md p-4 flex flex-col gap-2`,children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${t}`}),e.jsxs("span",{className:"text-[11px] text-gray-400 dark:text-gray-500",children:["Expires ",M(s.expiryDate)]})]}),e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white leading-snug line-clamp-2 min-h-[2.5rem]",children:s.title}),e.jsxs("p",{className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 truncate",children:[e.jsx(V,{className:"w-3 h-3 shrink-0"}),s.organization]}),e.jsx(Q,{days:r,styleKey:a})]})}function ee({certificates:s=[]}){const r=v.useRef(null),a=s.filter(t=>t.status!=="expired"&&t.expiryDate).sort((t,c)=>H(g(t.expiryDate),g(c.expiryDate))),d=t=>{r.current&&r.current.scrollBy({left:t*220,behavior:"smooth"})};return e.jsxs("div",{className:"rounded-xl shadow-md bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:"Upcoming Renewals"}),a.length>0&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>d(-1),className:"p-1.5 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:e.jsx(B,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>d(1),className:"p-1.5 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:e.jsx(j,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})]}),a.length===0?e.jsx($,{title:"No upcoming renewals",message:"All your active certifications are valid well into the future."}):e.jsx("div",{ref:r,className:"overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:e.jsx(i.div,{variants:n,initial:"hidden",animate:"visible",className:"flex gap-3",style:{width:"max-content"},children:a.map(t=>e.jsx(Z,{cert:t},t.id))})})]})}const re=[{key:"total",label:"Total Certifications",icon:w,color:"indigo"},{key:"active",label:"Active",icon:W,color:"emerald"},{key:"expiringSoon",label:"Expiring Soon",icon:F,color:"amber"},{key:"expired",label:"Expired",icon:K,color:"red"}],ae={total:"+1 this month",active:"fully valid",expiringSoon:"renew soon",expired:"action needed"};function Ne(){const s=k(),r=N(o=>o.user),a=S(r?.id),d=A(r?.id),t=[...d].slice(-3).reverse(),{loading:c}=D(800);return c?e.jsx(p,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-8 w-48 rounded-lg bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx(T,{count:4}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[e.jsx("div",{className:"lg:col-span-3 h-64 rounded-xl bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"lg:col-span-2 h-64 rounded-xl bg-gray-200 dark:bg-gray-700 animate-pulse"})]})]})}):e.jsx(p,{children:e.jsxs(i.div,{variants:n,initial:"hidden",animate:"visible",className:"space-y-6",children:[e.jsxs(i.div,{variants:l,children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",r?.name," ðŸ‘‹"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Here's your certification overview"})]}),e.jsx(i.div,{variants:n,className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:re.map(({key:o,label:h,icon:y,color:b})=>e.jsx(i.div,{variants:l,children:e.jsx(R,{title:h,value:a[o]??0,icon:y,color:b,trend:ae[o]})},o))}),e.jsxs(i.div,{variants:l,className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(E,{stats:a})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ee,{certificates:d})})]}),e.jsxs(i.div,{variants:l,className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-3 rounded-xl shadow-md bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:"Recent Certifications"}),e.jsxs("button",{onClick:()=>s("/user/certifications"),className:"flex items-center gap-1 text-xs font-medium text-indigo-600 dark:text-indigo-400 hover:underline",children:["View All ",e.jsx(I,{className:"w-3.5 h-3.5"})]})]}),t.length>0?e.jsx(i.div,{variants:n,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:t.map(o=>e.jsx(_,{cert:o},o.id))}):e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 text-center py-8",children:"No certifications yet."})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(J,{userId:r?.id})})]})]})})}export{Ne as default};
